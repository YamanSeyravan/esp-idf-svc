<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="embassy-time"><title>embassy_time - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="embassy_time" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0-nightly (32303b219 2023-07-29)" data-channel="nightly" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-6d2c9675f3d09c26.css" data-theme-dark-css="dark-45ceb8f2e522f4d1.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-6d2c9675f3d09c26.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-45ceb8f2e522f4d1.css"><link rel="stylesheet" href="../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../embassy_time/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../embassy_time/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate embassy_time</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.2</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">embassy_time</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/embassy_time/lib.rs.html#1-50">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="embassy-time"><a href="#embassy-time">embassy-time</a></h2>
<p>Timekeeping, delays and timeouts.</p>
<p>Timekeeping is done with elapsed time since system boot. Time is represented in
ticks, where the tick rate is defined by the current driver, usually to match
the tick rate of the hardware.</p>
<p>Tick counts are 64 bits. At the highest supported tick rate of 1Mhz this supports
representing time spans of up to ~584558 years, which is big enough for all practical
purposes and allows not having to worry about overflows.</p>
<p><a href="struct.Instant.html" title="struct embassy_time::Instant"><code>Instant</code></a> represents a given instant of time (relative to system boot), and <a href="struct.Duration.html" title="struct embassy_time::Duration"><code>Duration</code></a>
represents the duration of a span of time. They implement the math operations you’d expect,
like addition and substraction.</p>
<h2 id="delays-and-timeouts"><a href="#delays-and-timeouts">Delays and timeouts</a></h2>
<p><a href="struct.Timer.html" title="struct embassy_time::Timer"><code>Timer</code></a> allows performing async delays. <a href="struct.Ticker.html" title="struct embassy_time::Ticker"><code>Ticker</code></a> allows periodic delays without drifting over time.</p>
<p>An implementation of the <code>embedded-hal</code> delay traits is provided by <a href="struct.Delay.html" title="struct embassy_time::Delay"><code>Delay</code></a>, for compatibility
with libraries from the ecosystem.</p>
<h2 id="wall-clock-time"><a href="#wall-clock-time">Wall-clock time</a></h2>
<p>The <code>time</code> module deals exclusively with a monotonically increasing tick count.
Therefore it has no direct support for wall-clock time (“real life” datetimes
like <code>2021-08-24 13:33:21</code>).</p>
<p>If persistence across reboots is not needed, support can be built on top of
<code>embassy_time</code> by storing the offset between “seconds elapsed since boot”
and “seconds since unix epoch”.</p>
<h2 id="time-driver"><a href="#time-driver">Time driver</a></h2>
<p>The <code>time</code> module is backed by a global “time driver” specified at build time.
Only one driver can be active in a program.</p>
<p>All methods and structs transparently call into the active driver. This makes it
possible for libraries to use <code>embassy_time</code> in a driver-agnostic way without
requiring generic parameters.</p>
<p>For more details, check the <a href="driver/index.html" title="mod embassy_time::driver"><code>driver</code></a> module.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="driver/index.html" title="mod embassy_time::driver">driver</a></div><div class="desc docblock-short">Time driver interface</div></li><li><div class="item-name"><a class="mod" href="queue/index.html" title="mod embassy_time::queue">queue</a></div><div class="desc docblock-short">Timer queue implementation</div></li></ul><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.time_driver_impl.html" title="macro embassy_time::time_driver_impl">time_driver_impl</a></div><div class="desc docblock-short">Set the time Driver implementation.</div></li><li><div class="item-name"><a class="macro" href="macro.timer_queue_impl.html" title="macro embassy_time::timer_queue_impl">timer_queue_impl</a></div><div class="desc docblock-short">Set the TimerQueue implementation.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Delay.html" title="struct embassy_time::Delay">Delay</a></div><div class="desc docblock-short">Type implementing async delays and blocking <code>embedded-hal</code> delays.</div></li><li><div class="item-name"><a class="struct" href="struct.Duration.html" title="struct embassy_time::Duration">Duration</a></div><div class="desc docblock-short">Represents the difference between two <a href="struct.Instant.html">Instant</a>s</div></li><li><div class="item-name"><a class="struct" href="struct.Instant.html" title="struct embassy_time::Instant">Instant</a></div><div class="desc docblock-short">An Instant in time, based on the MCU’s clock ticks since startup.</div></li><li><div class="item-name"><a class="struct" href="struct.Ticker.html" title="struct embassy_time::Ticker">Ticker</a></div><div class="desc docblock-short">Asynchronous stream that yields every Duration, indefinitely.</div></li><li><div class="item-name"><a class="struct" href="struct.TimeoutError.html" title="struct embassy_time::TimeoutError">TimeoutError</a></div><div class="desc docblock-short">Error returned by <a href="fn.with_timeout.html" title="fn embassy_time::with_timeout"><code>with_timeout</code></a> on timeout.</div></li><li><div class="item-name"><a class="struct" href="struct.Timer.html" title="struct embassy_time::Timer">Timer</a></div><div class="desc docblock-short">A future that completes at a specified <a href="struct.Instant.html">Instant</a>.</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.TICK_HZ.html" title="constant embassy_time::TICK_HZ">TICK_HZ</a></div><div class="desc docblock-short">Ticks per second of the global timebase.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.block_for.html" title="fn embassy_time::block_for">block_for</a></div><div class="desc docblock-short">Blocks for at least <code>duration</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.with_timeout.html" title="fn embassy_time::with_timeout">with_timeout</a></div><div class="desc docblock-short">Runs a given future with a timeout.</div></li></ul></section></div></main></body></html>